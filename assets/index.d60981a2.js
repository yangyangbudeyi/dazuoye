import{_ as N}from"./index.d37bd872.js";import{d as O,a as n,r as S,o as T,t as j,aQ as M,Q as U,bg as z,O as D,W as H,ar as J,ac as P,ad as Q,aM as R,i as c,j as $,k as i,m as g,q as v,p as f,w as y,S as F,n as q,bh as G,G as W,J as C,T as K,_ as X}from"./index.41016c19.js";/* empty css                  */import{_ as Y}from"./index.f3304c8b.js";/* empty css               */import{u as Z}from"./validateLogin.4aa471ef.js";/* empty css                  *//* empty css                */const ee={class:"collect"},te={class:"top"},ae=C("\u6B63\u5728\u62FC\u547D\u4E3A\u60A8\u67E5\u8BE2\u5DF2\u6536\u85CF\u7684\u6587\u7AE0..."),oe=C("\u60A8\u5DF2\u7ECF\u6536\u85CF\u4E86"),se=C("\u7BC7\u6587\u7AE0"),ue={class:"switch"},ne={class:"item"},le=C("\u627E\u70B9\u597D\u6587\u7AE0"),ce=O({__name:"index",setup(ie){var A;const r=n(0),d=n(!1),o=n(!1),B=n(!1),s=n(!1),h=n([]),E=(A=JSON.parse(localStorage.getItem("userInfo")))==null?void 0:A.userId,_=S({pageOn:1,pageCount:15});T(()=>{s.value=!0,document.documentElement.scrollTop=0,w(),x()});const I=e=>{_.pageOn=e,w(),document.documentElement.scrollTo({top:0,behavior:"smooth"})},w=async e=>{var p;const t={userId:E,...j(_)};e||(s.value=!0);const{data:a}=await M(t).finally(()=>{setTimeout(()=>{s.value=!1},1e3)});if(a.code!=200){d.value=!0,h.value=[];return}const u=(p=a.data)==null?void 0:p.map(l=>{var m;return l.tag=(m=l.tag)==null?void 0:m.join(","),l});h.value=u,r.value=a.total};U.on("removeCollectArt",async e=>{const{data:t}=await z(e);if(t.code!=200)return D.error("\u79FB\u9664\u6536\u85CF\u5931\u8D25");D.success("\u79FB\u9664\u6210\u529F"),w("hiddenLoading")});const x=async()=>{let{data:e}=await H(E);e.data[0].collectVisiable=="1"?o.value=!0:o.value=!1},V=async()=>{const{state:e,login:t}=await Z();if(!e||!t){o.value=!o.value;return}let a="";o.value?a="0":a="1";let{data:u}=await G(E,a).finally(()=>B.value=!1);if(u.code==4044)return o.value=!o.value;u.code==200&&x()};return(e,t)=>{const a=J,u=P,p=K,l=Y,m=Q,k=R,L=N;return c(),$("div",ee,[i("div",te,[s.value?(c(),g(a,{key:0,size:"large",plain:""},{default:v(()=>[ae]),_:1})):(c(),g(a,{key:1,size:"large",plain:""},{default:v(()=>[oe,i("b",null,W(r.value),1),se]),_:1})),i("div",ue,[f(u,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=b=>o.value=b),class:"mb-2",width:"100",disabled:d.value||!r.value||s.value,onChange:V,"active-text":"\u4EC5\u81EA\u5DF1\u53EF\u89C1","inactive-text":"\u6536\u85CF\u5185\u5BB9\u516C\u5F00\u53EF\u89C1",loading:B.value},null,8,["modelValue","disabled","loading"])])]),y((c(),g(p,{height:480,class:"searchLoading",key:Date.now(),top:-65})),[[F,s.value]]),y(i("div",null,[i("div",ne,[f(l,{isCollect:!0,list:h.value},null,8,["list"])]),y(f(k,{icon:"warning",style:{"margin-top":"70px"},title:"\u60A8\u8FD8\u6CA1\u6709\u6536\u85CF\u8FC7\u6587\u7AE0\u5462"},{extra:v(()=>[f(m,{type:"primary",onClick:t[1]||(t[1]=b=>e.$router.push("/home"))},{default:v(()=>[le]),_:1})]),_:1},512),[[F,d.value]]),d.value?q("",!0):(c(),g(L,{key:0,pageOn:_.pageOn,pageCount:_.pageCount,total:r.value,onChangeNum:I},null,8,["pageOn","pageCount","total"]))],512),[[F,!s.value]])])}}});const Ce=X(ce,[["__scopeId","data-v-772c2fc1"]]);export{Ce as default};
