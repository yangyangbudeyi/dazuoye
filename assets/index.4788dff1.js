import{d as D,a as E,r as F,a8 as R,a9 as N,ad as z,ae as Z,i as v,j as A,p as o,q as n,k as c,F as j,b0 as T,U as h,V as x,A as q,u as C,aT as G,aU as J,J as w,G as L,aW as g,b1 as O,O as l,b2 as W,a_ as H,_ as y,o as K,N as Q}from"./index.41016c19.js";/* empty css                     */const X=""+new URL("reg_bg.16279ee4.jpg",import.meta.url).href,Y=a=>(h("data-v-b8345d03"),a=a(),x(),a),ee=Y(()=>c("p",null,"\u91CD\u7F6E\u5BC6\u7801",-1)),ue=w("\u91CD\u7F6E\u5BC6\u7801 "),oe={class:"links"},te=w("\u7ACB\u5373\u767B\u5F55"),se=w("\u56DE\u5230\u9996\u9875"),ae=D({__name:"index",props:{disabledBtn:{type:Boolean}},setup(a){const i=E(),p=E(!1),f=E("\u53D1\u9001\u9A8C\u8BC1\u7801"),V=q(),b=(s,e,u)=>{e===""?u(new Error("\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A")):(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)||u(new Error("\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u90AE\u7BB1")),u())},$=(s,e,u)=>{e===""?u(new Error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A")):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/.test(e)?u():u(new Error("\u5BC6\u7801\u5FC5\u987B\u7531\u6570\u5B57\u5B57\u6BCD\u7EC4\u6210\u4E14\u4E3A8-16\u4F4D"))},I=(s,e,u)=>{e===""?u(new Error("\u786E\u8BA4\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A")):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/.test(e)?e!==t.password?u(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4")):u():u(new Error("\u786E\u8BA4\u5BC6\u7801\u5FC5\u987B\u7531\u6570\u5B57\u5B57\u6BCD\u7EC4\u6210\u4E14\u4E3A8-16\u4F4D"))},k=(s,e,u)=>{e===""?u(new Error("\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A")):u()},t=F({username:"",password:"",checkoutPassword:"",validateCode:""}),M=F({username:[{validator:b,trigger:"change"}],password:[{validator:$,trigger:"change"}],checkoutPassword:[{validator:I,trigger:"change"}],validateCode:[{validator:k,trigger:"change"}]}),P=s=>{!s||s.validate(async e=>{if(e)S();else return!1})},S=async()=>{const s={username:t.username,password:t.password,code:t.validateCode},{data:e}=await O(s);if(e.code==403)return l.warning("\u8D26\u53F7\u4E0D\u5B58\u5728");if(e.code==400)return l.error("\u9A8C\u8BC1\u7801\u4E0D\u6B63\u786E");if(e.code==404)return l.error("\u91CD\u7F6E\u5BC6\u7801\u5931\u8D25\uFF01");l.success("\u91CD\u7F6E\u5BC6\u7801\u6210\u529F"),V.push("/login?commit=login")},U=async()=>{var s;(s=i.value)==null||s.validateField("username",async(e,u)=>{const r=u==null?void 0:u.username[0].message;if(!e)return l.warning(r);const{data:m}=await W(t.username);if(m.code==405)return l.warning("\u8BE5\u8D26\u53F7\u5DF2\u5B58\u5728");if(m.code==404)return l.error("\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25");p.value=!0,H({title:"\u9A8C\u8BC1\u7801\u901A\u77E5",message:"\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF01\u8BF7\u6CE8\u610F\u67E5\u6536",type:"success"});let _=120,B=setInterval(()=>{_-=1,f.value=`${_}\u540E\u91CD\u65B0\u53D1\u9001`,_<=0&&(clearInterval(B),f.value="\u53D1\u9001\u9A8C\u8BC1\u7801",p.value=!1)},1200)})};return(s,e)=>{const u=R,r=N,m=z,_=Z,B=T("router-link");return v(),A(j,null,[ee,o(_,{ref_key:"ruleFormRef",ref:i,model:t,"status-icon":"",rules:M,"label-width":"100px",class:"demo-ruleForm"},{default:n(()=>[o(r,{prop:"username"},{default:n(()=>[o(u,{placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u8D26\u53F7",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=d=>t.username=d),modelModifiers:{trim:!0},type:"text",autocomplete:"off","prefix-icon":C(G)},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{class:"sendCode",prop:"validateCode"},{default:n(()=>[o(u,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",modelValue:t.validateCode,"onUpdate:modelValue":e[1]||(e[1]=d=>t.validateCode=d),modelModifiers:{trim:!0},type:"text",autocomplete:"off","prefix-icon":C(J)},null,8,["modelValue","prefix-icon"]),o(m,{disabled:p.value||a.disabledBtn,onClick:U},{default:n(()=>[w(L(f.value),1)]),_:1},8,["disabled"])]),_:1}),o(r,{prop:"password"},{default:n(()=>[o(u,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=d=>t.password=d),modelModifiers:{trim:!0},type:"password",autocomplete:"off","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801","prefix-icon":C(g)},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"checkoutPassword"},{default:n(()=>[o(u,{modelValue:t.checkoutPassword,"onUpdate:modelValue":e[3]||(e[3]=d=>t.checkoutPassword=d),modelModifiers:{trim:!0},type:"password","show-password":"",autocomplete:"off",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801","prefix-icon":C(g)},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,null,{default:n(()=>[o(m,{type:"primary",disabled:a.disabledBtn,class:"loginBtn",onClick:e[4]||(e[4]=d=>P(i.value))},{default:n(()=>[ue]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"]),c("div",oe,[o(B,{to:"/login?commit=login"},{default:n(()=>[te]),_:1}),o(B,{to:"/home"},{default:n(()=>[se]),_:1})])],64)}}});const re=y(ae,[["__scopeId","data-v-b8345d03"]]),ne=a=>(h("data-v-0c317c86"),a=a(),x(),a),de={class:"repsd"},le={class:"contain"},ie=ne(()=>c("div",{class:"left"},[c("img",{src:X,alt:""})],-1)),ce={class:"right"},pe=D({__name:"index",setup(a){const i=E(!1);return K(async()=>{if(await Q("\u6539\u5BC6"))return i.value=!0}),(p,f)=>(v(),A("div",de,[c("div",le,[ie,c("div",ce,[o(re,{disabledBtn:i.value},null,8,["disabledBtn"])])])]))}});const fe=y(pe,[["__scopeId","data-v-0c317c86"]]);export{fe as default};
